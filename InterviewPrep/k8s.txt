Architecture ===
Kubernetes Master ## all components runs as pod in kube-system namespace
  etcd <-> (key-value store that keeps the current state of cluster)
  
            kube-apiserver (serves REST operations, connects to etcd database)
            kube-controllermanager (manages current state of cluster)
            kube-scheduler (schedules pods on specific nodes based on labels, taints, tolerations set for pods)
           
kubernetes node ## kube-proxy runs as pod(kube-system), kubelet is a service(systemctl)

  kubelet (Talks to container engine to ensure pods availability)
  kube-proxy (runs on everynode + uses iptables to provide an interface to connect to k8s components)
  
container runtime: takes care of actually running the containers. 
supervisord: monitors and guarantees the availability of kubelet and docker processes. 
network agent: implements a software defined n/w+ing solution, such as weave
logging: the CNCF project Fluentd used for unified logging in the cluster. a Fluentd agent must be installed on all k8s nodes. 
=================================================================================

Cluster creation - kubeadm ===
All nodes::
Install(yum) : docker(container runtime), kubelet(enable-service), kubeadm, kubectl
disable swap (free -m, /etc/fstab, disable swap mount)
disable firewall or open appropriate ports in the firewall
/etc/hosts, setup hostname resolving ##/etc/hosts # { IP Domain alias} ## ssh alias

On control: kubeadm init. (root), note down "kubeadm join" command after initialization.

client configuration file creation:(regular user)
 - create(~/.kube) && cp -l /etc/kubernetes/admin.conf ~/.kube/config && chown $(id -u):$(id -g) ~/.kube/config
 - kubectl cluster-info
 
 Alternative: export KUBECONFIG=/etc/kubernetes/admin.conf
 kubectl config -h/view/get-context
 
 n/w add-on = kubectl apply -f <flannel/calico/Weave>.yaml ##  CNI(container n/w interface), pod communication
 Ensure namespace/kube-system - pod/{coredns,flannel} is running. If it is up and running, you can start joining nodes. 
 
--- Join nodes in cluster(root)
kubeadm join --token<> IP:6443 --discovery-token-ca-cert-hash <> ## if no token -> kubeadm token list/create/
=================================================================================

